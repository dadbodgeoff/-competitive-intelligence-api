```mermaid
%%{init: {'theme':'dark', 'themeVariables': { 'primaryColor':'#10b981','primaryTextColor':'#fff','primaryBorderColor':'#059669','lineColor':'#6366f1','secondaryColor':'#3b82f6','tertiaryColor':'#8b5cf6'}}}%%
sequenceDiagram
    participant U as üë§ User
    participant F as üé® Frontend
    participant API as ‚ö° FastAPI
    participant G as üåê Google Places
    participant AI as ü§ñ Gemini 2.0 Flash
    participant DB as üíæ PostgreSQL
    
    Note over U,DB: Real Menu Comparison - Actual Metrics
    
    U->>F: Enter Restaurant Info
    F->>API: POST /discover
    Note right of API: üîí HTTPOnly Cookie Auth
    
    API->>G: Find Competitors
    Note right of G: Location: Woonsocket, RI<br/>Radius: 3 miles
    G-->>API: 5 Competitors Found
    
    API->>API: Auto-select Top 2
    Note right of API: River Falls (1885 reviews, 4‚≠ê)<br/>Lindy's Tavern (1862 reviews, 4.5‚≠ê)
    
    API->>DB: Store Analysis (8.5s)
    API-->>F: ‚úÖ Competitors Ready
    
    U->>F: Start Analysis
    F->>API: POST /analyze/stream
    Note right of API: SSE Streaming
    
    loop Parse Each Competitor
        API->>AI: Parse Menu (Web Search)
        Note right of AI: Gemini 2.0 Flash<br/>8-10 seconds each
        AI-->>API: Menu Items Extracted
        API-->>F: SSE: Progress Update
        F-->>U: ‚ö° Real-time UI
    end
    
    Note over API,AI: Competitor 1: 18 items (9s)<br/>Competitor 2: 19 items (9s)
    
    API->>AI: Generate Insights
    Note right of AI: LLM Analysis<br/>7-9 seconds
    AI-->>API: 7 Insights Generated
    
    API->>DB: Store Results
    API-->>F: ‚úÖ Analysis Complete (35s)
    F-->>U: üéâ View Insights
    
    Note over U,DB: Total: 35 seconds (8.5s discovery + 18s parsing + 8s analysis)
```
