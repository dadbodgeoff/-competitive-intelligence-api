PREMIUM TIER AUDIT - Analysis ID: 5cec1990-c54d-4935-b352-18af09e78f38
================================================================================

FINDINGS:

1. COMPETITOR COUNT: 4 instead of 5
   - Log shows: "Found 4 competitors"
   - Expected: 5 competitors for premium tier
   - Likely cause: Google Places API only returned 4 results in the area
   - Location: Woonsocket Rhode Island (small area, limited pizza places)

2. INSIGHTS COUNT: 20 instead of 25
   - Log shows: "Found 20 insights"
   - Expected: 25 insights (5 per competitor × 5 competitors)
   - Actual: 20 insights (5 per competitor × 4 competitors) ✓ CORRECT RATIO
   - This is proportional to the 4 competitors found

3. EVIDENCE REVIEWS: Missing from display
   - Backend query: "GET .../evidence_reviews?...analysis_id=eq.5cec1990..."
   - Evidence reviews ARE being queried
   - Need to check if they're being stored and displayed properly
   - Free tier shows evidence reviews correctly
   - Premium tier should show 35 reviews per competitor (140 total for 4 competitors)

ROOT CAUSES:

A. Missing 5th Competitor:
   - Google Places API limitation in small geographic area
   - Only 4 pizza places found within search radius
   - Not a bug - just limited availability in Woonsocket, RI

B. Evidence Reviews Not Showing:
   - Need to verify premium_tier_llm_service.py stores evidence reviews
   - Need to verify enhanced_analysis_storage.py handles premium evidence
   - Free tier uses different storage path that works
   - Premium tier may not be storing evidence_reviews in same format

COMPARISON WITH FREE TIER:

Free Tier Evidence Storage:
- Stores in evidence_reviews table
- Groups by sentiment (negative/positive/neutral)
- Shows 10+ reviews with full text
- Works correctly

Premium Tier Evidence Storage:
- Should store 35 reviews per competitor
- Should show 140 total reviews (35 × 4 competitors)
- Currently not appearing in frontend
- Backend IS querying the table but may be empty

NEXT STEPS (DO NOT IMPLEMENT YET):

1. Check premium_tier_llm_service.py - does it return evidence_reviews?
2. Check enhanced_analysis_storage.py - does it store premium evidence?
3. Compare free vs premium evidence storage logic
4. Verify evidence_reviews table has data for this analysis
5. Check frontend EvidenceReviewsDisplay component for premium support

FILES TO REVIEW:
- services/premium_tier_llm_service.py
- services/enhanced_analysis_storage.py  
- services/real_free_tier_llm_service.py (working reference)
- frontend/src/components/analysis/EvidenceReviewsDisplay.tsx
